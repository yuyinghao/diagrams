<mxfile host="app.diagrams.net" modified="2021-03-18T08:08:54.849Z" agent="5.0 (Macintosh; Intel Mac OS X 10_15_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/88.0.4324.192 Safari/537.36" etag="XjWfN3nzr0-1Td618waR" version="14.4.6" type="github">
  <diagram id="7InipoyFpy_3p1y0jpmR" name="Page-1">
    <mxGraphModel dx="1693" dy="943" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-52" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#000000;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="40" y="420" width="550" height="330" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-55" value="" style="rounded=0;whiteSpace=wrap;html=1;dashed=1;strokeColor=#000000;fillColor=none;" vertex="1" parent="1">
          <mxGeometry x="630" y="420" width="550" height="330" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-1" value="&lt;h1&gt;VTree的生成和更新&lt;/h1&gt;&lt;p&gt;1. 一个遍历周期，生成一个VTree对象，并对元素做了初步的可见性判断，发生在主线程&lt;br&gt;&lt;/p&gt;&lt;p&gt;2. 上面的可见性判断，比较粗糙，没有处理“遮挡”（详细参见https://www.notion.so/6572c468194b4173b981c51a63feefdd）&lt;/p&gt;&lt;p&gt;3. 在使用VTree做曝光之前，要先利用“遮挡”逻辑更新VTree，这里发生在子线程&lt;/p&gt;&lt;p&gt;4. 更好好之后，得到是一个可见性更新完毕的VTree&lt;/p&gt;&lt;p&gt;5. 先后两次生成的VTree，做diff：后一个VTree独有的节点，要曝光开始；前一个VTree独有的节点，是曝光结束&lt;/p&gt;" style="text;html=1;strokeColor=none;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="20" y="40" width="730" height="190" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-3" value="" style="rounded=1;whiteSpace=wrap;html=1;strokeColor=none;fillColor=#FFE6CC;" vertex="1" parent="1">
          <mxGeometry x="40" y="280" width="360" height="60" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-5" value="T3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="160" y="290" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-6" value="T2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="105" y="290" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-7" value="T1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="50" y="290" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-8" value="" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="360" as="sourcePoint" />
            <mxPoint x="600" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-9" value="time" style="edgeLabel;html=1;align=center;verticalAlign=middle;resizable=0;points=[];" vertex="1" connectable="0" parent="yNR7vr-cKEVTIiJnfPpI-8">
          <mxGeometry x="0.7661" relative="1" as="geometry">
            <mxPoint x="85.83" y="20" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-10" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-12" target="yNR7vr-cKEVTIiJnfPpI-16">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-11" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-12" target="yNR7vr-cKEVTIiJnfPpI-19">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-12" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="310" y="450" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-13" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-16" target="yNR7vr-cKEVTIiJnfPpI-20">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-14" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-16" target="yNR7vr-cKEVTIiJnfPpI-23">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-15" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-16" target="yNR7vr-cKEVTIiJnfPpI-24">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-16" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="180" y="520" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-17" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-19" target="yNR7vr-cKEVTIiJnfPpI-25">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-18" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-19" target="yNR7vr-cKEVTIiJnfPpI-27">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-19" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="450" y="520" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-20" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="70" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-21" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-23" target="yNR7vr-cKEVTIiJnfPpI-28">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-22" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-23" target="yNR7vr-cKEVTIiJnfPpI-29">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-23" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="180" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-24" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="290" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-25" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="400" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-26" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-27" target="yNR7vr-cKEVTIiJnfPpI-30">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-27" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="520" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-28" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="130" y="680" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-29" value="10" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="230" y="680" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-30" value="11" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#B3B3B3;" vertex="1" parent="1">
          <mxGeometry x="520" y="690" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-31" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-33" target="yNR7vr-cKEVTIiJnfPpI-37">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-32" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-33" target="yNR7vr-cKEVTIiJnfPpI-40">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-33" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="890" y="450" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-35" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-37" target="yNR7vr-cKEVTIiJnfPpI-44">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-37" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="760" y="520" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-38" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-40" target="yNR7vr-cKEVTIiJnfPpI-46">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-39" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-40" target="yNR7vr-cKEVTIiJnfPpI-48">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-40" value="20" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#FF6666;" vertex="1" parent="1">
          <mxGeometry x="1030" y="520" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-42" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-44" target="yNR7vr-cKEVTIiJnfPpI-49">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-43" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-44" target="yNR7vr-cKEVTIiJnfPpI-50">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-44" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="760" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-46" value="21" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#FF6666;" vertex="1" parent="1">
          <mxGeometry x="980" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-47" style="edgeStyle=none;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-48" target="yNR7vr-cKEVTIiJnfPpI-51">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-48" value="22" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#FF6666;" vertex="1" parent="1">
          <mxGeometry x="1100" y="600" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-49" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="710" y="680" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-50" value="10" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="810" y="680" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-51" value="23" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#FF6666;" vertex="1" parent="1">
          <mxGeometry x="1100" y="690" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-53" value="&lt;font&gt;&lt;span style=&quot;font-weight: bold ; font-size: 16px&quot;&gt;T1：序号1的VTree&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;4、6、3、7、8、11曝光结束&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="50" y="430" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-58" value="&lt;font&gt;&lt;span style=&quot;font-weight: bold ; font-size: 16px&quot;&gt;T2：序号2的VTree&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;20、21、22、23需要曝光开始&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="640" y="430" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-60" value="&lt;font style=&quot;font-size: 14px&quot;&gt;step 1:&amp;nbsp; &lt;br&gt;- 从T1, T2中取出数组形式&lt;/font&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="35" y="880" width="195" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-61" value="" style="endArrow=none;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="35" y="870" as="sourcePoint" />
            <mxPoint x="805" y="870" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-62" value="&lt;font&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;Diff算法&amp;lt;复杂度O(4n)&amp;gt;：&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="35" y="840" width="305" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-64" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="260" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-65" value="3" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="314" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-66" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="200" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-68" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="428" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-69" value="6" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="482" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-70" value="4" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="368" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-71" value="8" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="592" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-72" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="646" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-73" value="7" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="532" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-74" value="11" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="762" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-76" value="10" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="702" y="960" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-83" value="&lt;font&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;T1:&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="965" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-84" value="2" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="260" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-85" value="5" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="314" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-86" value="1" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="200" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-87" value="10" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="428" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-88" value="20" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="482" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-89" value="9" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="368" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-90" value="22" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="592" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-91" value="23" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="646" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-92" value="21" style="ellipse;whiteSpace=wrap;html=1;aspect=fixed;strokeColor=none;fillColor=#97D077;" vertex="1" parent="1">
          <mxGeometry x="532" y="1020" width="40" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-95" value="&lt;font&gt;&lt;span style=&quot;font-size: 16px&quot;&gt;&lt;b&gt;T2:&lt;/b&gt;&lt;/span&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="110" y="1025" width="50" height="30" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-135" style="rounded=0;orthogonalLoop=1;jettySize=auto;html=1;dashed=1;" edge="1" parent="1" source="yNR7vr-cKEVTIiJnfPpI-96" target="yNR7vr-cKEVTIiJnfPpI-134">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-96" value="&lt;font style=&quot;font-size: 14px&quot;&gt;step 1:&amp;nbsp; &lt;br&gt;- 遍历两个数组，并将出现次数在map中记录&lt;/font&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="1160" width="300" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-97" value="" style="endArrow=none;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="1150" as="sourcePoint" />
            <mxPoint x="810" y="1150" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-120" value="&lt;div&gt;&lt;span&gt;id: 1&lt;/span&gt;&lt;/div&gt;&lt;div&gt;oldCount: 1&lt;/div&gt;&lt;div&gt;newCount: 1&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCCCFF;strokeColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="137" y="1230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-121" value="&lt;div&gt;&lt;span&gt;id: 2&lt;/span&gt;&lt;/div&gt;&lt;div&gt;oldCount: 1&lt;/div&gt;&lt;div&gt;newCount: 1&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCCCFF;strokeColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="287" y="1230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-122" value="&lt;div&gt;&lt;span&gt;id: 4&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;oldCount: 1&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;newCount: 0&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCCCFF;strokeColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="437" y="1230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-123" value="&lt;div&gt;&lt;span&gt;id: 20&lt;/span&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;oldCount: 0&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;&lt;div&gt;&lt;font color=&quot;#ff0000&quot;&gt;&lt;b&gt;newCount: 1&lt;/b&gt;&lt;/font&gt;&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCCCFF;strokeColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="579" y="1230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-124" value="&lt;div&gt;等等。。。&lt;/div&gt;" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#CCCCFF;strokeColor=none;align=left;" vertex="1" parent="1">
          <mxGeometry x="747" y="1230" width="120" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-125" value="&lt;font style=&quot;font-size: 14px&quot;&gt;step 1:&amp;nbsp; &lt;br&gt;- 再分别遍历两个数组&lt;br&gt;- oldCount&amp;gt;0 &amp;amp;&amp;amp; newCount==0的就是要曝光结束的&lt;br&gt;- oldCount==0 &amp;amp;&amp;amp; newCount&amp;gt;0的就是要曝光开始的&lt;br&gt;- 其他的就是不发生变化的&lt;br&gt;&lt;/font&gt;" style="text;html=1;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="40" y="1350" width="380" height="90" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-126" value="" style="endArrow=none;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="40" y="1340" as="sourcePoint" />
            <mxPoint x="810" y="1340" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-132" value="&lt;font&gt;&lt;span style=&quot;font-weight: bold ; font-size: 16px&quot;&gt;T1：序号1的VTree&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;4、6、3、7、8、11曝光结束&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="482" y="1370" width="160" height="50" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-133" value="&lt;font&gt;&lt;span style=&quot;font-weight: bold ; font-size: 16px&quot;&gt;T2：序号2的VTree&lt;/span&gt;&lt;br&gt;&lt;font style=&quot;font-size: 12px&quot;&gt;20、21、22、23需要曝光开始&lt;/font&gt;&lt;br&gt;&lt;/font&gt;" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="482" y="1440" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="yNR7vr-cKEVTIiJnfPpI-134" value="&lt;h1&gt;节点equal判断&lt;/h1&gt;&lt;p&gt;1. node节点的id是从view中得来的&lt;/p&gt;&lt;p&gt;2. view的复用性将对这里产生影响&lt;/p&gt;&lt;p&gt;3. 默认就是使用view hash，以及其他一系列值作为id标识&lt;/p&gt;&lt;p&gt;4. 业务方需要对view复用的场景设置bizIdentifier，这样可以做到即使view复用了，渲染view的model么有变化，这个时候对应的node是equal的，不会额外产生曝光开始和结束&lt;/p&gt;" style="text;html=1;fillColor=none;spacing=5;spacingTop=-20;whiteSpace=wrap;overflow=hidden;rounded=0;strokeColor=#000000;dashed=1;" vertex="1" parent="1">
          <mxGeometry x="940" y="1095" width="480" height="170" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
